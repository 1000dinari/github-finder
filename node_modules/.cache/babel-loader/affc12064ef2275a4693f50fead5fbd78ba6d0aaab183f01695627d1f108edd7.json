{"ast":null,"code":"import _regeneratorRuntime from\"/home/barbarik/js/github-finder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/barbarik/js/github-finder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/barbarik/js/github-finder/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useReducer}from\"react\";import githubReducer from\"./GithubReducer\";import{jsx as _jsx}from\"react/jsx-runtime\";var GithubContext=/*#__PURE__*/createContext();var GITHUB_URL=process.env.REACT_APP_GITHUB_URL;export var GithubProvider=function GithubProvider(_ref){var children=_ref.children;var initialState={users:[],user:{},repos:[],loading:false};var _useReducer=useReducer(githubReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var searchUsers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(text){var params,response,_yield$response$json,items;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading();params=new URLSearchParams({q:text});_context.next=4;return fetch(\"\".concat(GITHUB_URL,\"/search/users?\").concat(params));case 4:response=_context.sent;_context.next=7;return response.json();case 7:_yield$response$json=_context.sent;items=_yield$response$json.items;dispatch({type:\"GET_USERS\",payload:items});case 10:case\"end\":return _context.stop();}}},_callee);}));return function searchUsers(_x){return _ref2.apply(this,arguments);};}();var getUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(login){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading();_context2.next=3;return fetch(\"\".concat(GITHUB_URL,\"/users/\").concat(login));case 3:response=_context2.sent;if(!(response.status===404)){_context2.next=8;break;}window.location=\"/notfound\";_context2.next=12;break;case 8:_context2.next=10;return response.json();case 10:data=_context2.sent;dispatch({type:\"GET_USER\",payload:data});case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function getUser(_x2){return _ref3.apply(this,arguments);};}();var getUserRepos=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(login){var response,items;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoading();_context3.next=3;return fetch(\"\".concat(GITHUB_URL,\"/users/\").concat(login,\"/repos?sort=updated\"));case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:items=_context3.sent;dispatch({type:\"GET_USER_REPOS\",payload:items});case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function getUserRepos(_x3){return _ref4.apply(this,arguments);};}();var setLoading=function setLoading(){dispatch({type:\"SET_LOADING\"});};var deleteUsers=function deleteUsers(){setLoading();dispatch({type:\"CLEAR_USERS\"});};return/*#__PURE__*/_jsx(GithubContext.Provider,{value:{users:state.users,loading:state.loading,user:state.user,repos:state.repos,getUserRepos:getUserRepos,searchUsers:searchUsers,deleteUsers:deleteUsers,getUser:getUser},children:children});};export default GithubContext;","map":{"version":3,"names":["createContext","useReducer","githubReducer","GithubContext","GITHUB_URL","process","env","REACT_APP_GITHUB_URL","GithubProvider","children","initialState","users","user","repos","loading","state","dispatch","searchUsers","text","setLoading","params","URLSearchParams","q","fetch","response","json","items","type","payload","getUser","login","status","window","location","data","getUserRepos","deleteUsers"],"sources":["/home/barbarik/js/github-finder/src/context/github/GithubContext.js"],"sourcesContent":["import {createContext, useReducer} from \"react\"\nimport githubReducer from \"./GithubReducer\"\n\nconst GithubContext = createContext()\n\nconst GITHUB_URL = process.env.REACT_APP_GITHUB_URL\n\nexport const GithubProvider = ({children}) => {\n    const initialState = {\n        users: [],\n        user: {},\n        repos: [],\n        loading: false\n    }\n\n    const [state, dispatch] = useReducer(githubReducer, initialState)\n\n    const searchUsers = async (text) => {\n        setLoading()\n        const params = new URLSearchParams({\n            q: text\n        })\n\n        const response = await fetch(`${GITHUB_URL}/search/users?${params}`)\n\n\n        const {items} = await response.json()\n        dispatch({\n            type:\"GET_USERS\",\n            payload: items\n        })\n        \n    }\n\n    const getUser = async (login) => {\n        setLoading()\n        \n        const response = await fetch(`${GITHUB_URL}/users/${login}`)\n\n\n        if(response.status === 404)\n        {\n            window.location=\"/notfound\"\n        }\n        else\n        {\n            const data = await response.json()\n            dispatch({\n                type:\"GET_USER\",\n                payload: data,\n            })\n        }\n        \n    }\n\n    const getUserRepos = async (login) => {\n        setLoading()\n        \n        const response = await fetch(`${GITHUB_URL}/users/${login}/repos?sort=updated`)\n\n        const items = await response.json()\n        dispatch({\n            type:\"GET_USER_REPOS\",\n            payload: items,\n        })\n    }\n\n\n    const setLoading = () => {\n        dispatch({\n            type:\"SET_LOADING\",\n        })\n    }\n\n    const deleteUsers = () =>\n    {\n        setLoading()\n        dispatch({\n            type:\"CLEAR_USERS\",\n        })\n    }\n\n    return <GithubContext.Provider value={{\n        users: state.users,\n        loading: state.loading,\n        user: state.user,\n        repos: state.repos,\n        getUserRepos,\n        searchUsers,\n        deleteUsers,\n        getUser,\n    }}>\n        {children}\n    </GithubContext.Provider>\n\n}\n\nexport default GithubContext"],"mappings":"+WAAA,OAAQA,aAAa,CAAEC,UAAU,KAAO,OAAO,CAC/C,MAAOC,cAAa,KAAM,iBAAiB,4CAE3C,GAAMC,cAAa,cAAGH,aAAa,EAAE,CAErC,GAAMI,WAAU,CAAGC,OAAO,CAACC,GAAG,CAACC,oBAAoB,CAEnD,MAAO,IAAMC,eAAc,CAAG,QAAjBA,eAAc,MAAmB,IAAdC,SAAQ,MAARA,QAAQ,CACpC,GAAMC,aAAY,CAAG,CACjBC,KAAK,CAAE,EAAE,CACTC,IAAI,CAAE,CAAC,CAAC,CACRC,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,KACb,CAAC,CAED,gBAA0Bb,UAAU,CAACC,aAAa,CAAEQ,YAAY,CAAC,4CAA1DK,KAAK,iBAAEC,QAAQ,iBAEtB,GAAMC,YAAW,6FAAG,iBAAOC,IAAI,mKAC3BC,UAAU,EAAE,CACNC,MAAM,CAAG,GAAIC,gBAAe,CAAC,CAC/BC,CAAC,CAAEJ,IACP,CAAC,CAAC,uBAEqBK,MAAK,WAAInB,UAAU,0BAAiBgB,MAAM,EAAG,QAA9DI,QAAQ,qCAGQA,SAAQ,CAACC,IAAI,EAAE,2CAA9BC,KAAK,sBAALA,KAAK,CACZV,QAAQ,CAAC,CACLW,IAAI,CAAC,WAAW,CAChBC,OAAO,CAAEF,KACb,CAAC,CAAC,wDAEL,kBAfKT,YAAW,6CAehB,CAED,GAAMY,QAAO,6FAAG,kBAAOC,KAAK,0IACxBX,UAAU,EAAE,wBAEWI,MAAK,WAAInB,UAAU,mBAAU0B,KAAK,EAAG,QAAtDN,QAAQ,qBAGXA,QAAQ,CAACO,MAAM,GAAK,GAAG,2BAEtBC,MAAM,CAACC,QAAQ,CAAC,WAAW,wDAIRT,SAAQ,CAACC,IAAI,EAAE,SAA5BS,IAAI,gBACVlB,QAAQ,CAAC,CACLW,IAAI,CAAC,UAAU,CACfC,OAAO,CAAEM,IACb,CAAC,CAAC,0DAGT,kBAnBKL,QAAO,8CAmBZ,CAED,GAAMM,aAAY,6FAAG,kBAAOL,KAAK,2IAC7BX,UAAU,EAAE,wBAEWI,MAAK,WAAInB,UAAU,mBAAU0B,KAAK,wBAAsB,QAAzEN,QAAQ,uCAEMA,SAAQ,CAACC,IAAI,EAAE,QAA7BC,KAAK,gBACXV,QAAQ,CAAC,CACLW,IAAI,CAAC,gBAAgB,CACrBC,OAAO,CAAEF,KACb,CAAC,CAAC,yDACL,kBAVKS,aAAY,8CAUjB,CAGD,GAAMhB,WAAU,CAAG,QAAbA,WAAU,EAAS,CACrBH,QAAQ,CAAC,CACLW,IAAI,CAAC,aACT,CAAC,CAAC,CACN,CAAC,CAED,GAAMS,YAAW,CAAG,QAAdA,YAAW,EACjB,CACIjB,UAAU,EAAE,CACZH,QAAQ,CAAC,CACLW,IAAI,CAAC,aACT,CAAC,CAAC,CACN,CAAC,CAED,mBAAO,KAAC,aAAa,CAAC,QAAQ,EAAC,KAAK,CAAE,CAClChB,KAAK,CAAEI,KAAK,CAACJ,KAAK,CAClBG,OAAO,CAAEC,KAAK,CAACD,OAAO,CACtBF,IAAI,CAAEG,KAAK,CAACH,IAAI,CAChBC,KAAK,CAAEE,KAAK,CAACF,KAAK,CAClBsB,YAAY,CAAZA,YAAY,CACZlB,WAAW,CAAXA,WAAW,CACXmB,WAAW,CAAXA,WAAW,CACXP,OAAO,CAAPA,OACJ,CAAE,UACGpB,QAAQ,EACY,CAE7B,CAAC,CAED,cAAeN,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}